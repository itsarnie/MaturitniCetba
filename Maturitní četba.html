<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Kontrola maturitní četby</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(120deg, #f0f0f0, #ffffff);
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .container:hover {
            transform: translateY(-5px);
        }
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif;
        }
        h1 {
            font-size: 2rem;
            color: #007bff;
            text-align: center;
        }
        h2 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        h3 {
            font-size: 1.3rem;
            color: #007bff;
            margin-bottom: 10px;
        }
        .rules, .book-list, .selected-books {
            background-color: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* Responsive layout */
        .book-selection {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        /* Two-column layout for larger screens */
        @media (min-width: 768px) {
            .book-selection {
                grid-template-columns: 1fr 1fr;
            }
        }

        .book-list, .selected-books {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        .book-item {
            padding: 10px;
            margin: 6px 0;
            border-radius: 8px;
            background-color: #ffffff;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .book-item:hover {
            background-color: #e9f0ff;
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
        }
        .genre-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        .genre-proza { background-color: #e3f2fd; color: #007bff; }
        .genre-poezie { background-color: #f3e5f5; color: #9c27b0; }
        .genre-drama { background-color: #e8f5e9; color: #4caf50; }
        .validation-item {
            padding: 10px;
            margin: 6px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .validation-item.valid {
            background-color: #d4edda;
            color: #155724;
        }
        .validation-item.invalid {
            background-color: #f8d7da;
            color: #721c24;
        }
        .count-badge {
            background-color: #007bff;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        .search-box {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            transition: box-shadow 0.3s ease;
        }
        .search-box:focus {
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
        footer {
            margin-top: 30px;
            text-align: center;
            font-size: 0.9rem;
            color: #888;
        }
        footer span {
            font-weight: bold;
            color: #333;
        }

        .export-button {
            margin-top: 20px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .export-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kontrola maturitní četby</h1>
        <div class="rules">
            <h2>Pravidla výběru knih</h2>
            <div id="validationResults"></div>
        </div>

        <div class="book-selection">
            <div>
                <h3>Seznam dostupných knih</h3>
                <input type="text" class="search-box" id="searchBox" placeholder="Vyhledat knihu...">
                <div class="book-list" id="availableBooks"></div>
            </div>
            <div>
                <h3>Vybrané knihy (<span id="selectedCount">0</span>/20)</h3>
                <div class="selected-books" id="selectedBooks"></div>
                <button onclick="generatePDF()" class="export-button">Stáhnout seznam (PDF)</button>
            </div>
        </div>
    </div>

    <footer>
        © 2024 <span>Matěj Ričl</span>, <span>Střední průmyslová škola a Vyšší odborná škola Kladno</span>
    </footer>

    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script>
        const books = [
        { title: "Svatý Xaverius", author: "Arbes, J.", period: "19", genre: "próza", isCzech: true },
        { title: "Já, robot", author: "Asimov, I.", period: "20", genre: "próza", isCzech: false },
        { title: "Otec Goriot", author: "Balzac, H.", period: "19", genre: "próza", isCzech: false },
        { title: "Květy zla", author: "Baudelaire, Ch.", period: "19", genre: "poezie", isCzech: false },
        { title: "Čekání na Godota", author: "Beckett, S.", period: "20", genre: "drama", isCzech: false },
        { title: "451 stupňů Fahrenheita", author: "Bradbury, R.", period: "20", genre: "próza", isCzech: false },
        { title: "Cizinec", author: "Camus, A.", period: "20", genre: "próza", isCzech: false },
        { title: "Chladnokrevně", author: "Capote, T.", period: "20", genre: "próza", isCzech: false },
        { title: "Alchymista", author: "Coelho, P.", period: "20", genre: "próza", isCzech: false },
        { title: "Bílá nemoc", author: "Čapek, K.", period: "20", genre: "drama", isCzech: true },
        { title: "Krakatit", author: "Čapek, K.", period: "20", genre: "próza", isCzech: true },
        { title: "Loupežník", author: "Čapek, K.", period: "20", genre: "drama", isCzech: true },
        { title: "Válka s mloky", author: "Čapek, K.", period: "20", genre: "próza", isCzech: true },
        { title: "Věc Makropulos", author: "Čapek, K.", period: "20", genre: "drama", isCzech: true },
        { title: "Nový epochální výlet pana Broučka, tentokráte do XV.století", author: "Čech, Sv.", period: "19", genre: "próza", isCzech: true },
        { title: "Nadějné vyhlídky", author: "Dickens, Ch.", period: "19", genre: "próza", isCzech: false },
        { title: "Zločin a trest", author: "Dostojevskij, F. M.", period: "19", genre: "próza", isCzech: false },
        { title: "Němá barikáda", author: "Drda, J.", period: "20", genre: "próza", isCzech: true },
        { title: "Krysař", author: "Dyk, V.", period: "20", genre: "próza", isCzech: true },
        { title: "Jméno růže", author: "Eco, U.", period: "20", genre: "próza", isCzech: false },
        { title: "Kytice", author: "Erben, K. J.", period: "19", genre: "poezie", isCzech: true },
        { title: "Malý princ", author: "Exupéry, A. de Saint", period: "20", genre: "próza", isCzech: false },
        { title: "Deník Anne Frankové", author: "Franková, A.", period: "20", genre: "próza", isCzech: false },
        { title: "Spalovač mrtvol", author: "Fuks, L.", period: "20", genre: "próza", isCzech: true },
        { title: "Radosti života", author: "Gellner, F.", period: "20", genre: "poezie", isCzech: true },
        { title: "Utrpení mladého Werthera", author: "Goethe, J. W.", period: "18", genre: "próza", isCzech: false },
        { title: "Revizor", author: "Gogol, N. V.", period: "19", genre: "drama", isCzech: false },
        { title: "Pán much", author: "Golding, W.", period: "20", genre: "próza", isCzech: false },
        { title: "Audience", author: "Havel, V.", period: "20", genre: "drama", isCzech: true },
        { title: "Křest svatého Vladimíra", author: "Havlíček Borovský, K.", period: "19", genre: "poezie", isCzech: true },
        { title: "Tyrolské elegie", author: "Havlíček Borovský, K.", period: "19", genre: "poezie", isCzech: true },
        { title: "Hlava XXII.", author: "Heller, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Stařec a moře", author: "Hemingway, E.", period: "20", genre: "próza", isCzech: false },
        { title: "Obsluhoval jsem anglického krále", author: "Hrabal, B.", period: "20", genre: "próza", isCzech: true },
        { title: "Ostře sledované vlaky", author: "Hrabal, B.", period: "20", genre: "próza", isCzech: true },
        { title: "Blues pro bláznivou holku", author: "Hrabě, V.", period: "20", genre: "poezie", isCzech: true },
        { title: "Romance pro křídlovku", author: "Hrubín, F.", period: "20", genre: "poezie", isCzech: true },
        { title: "Chrám Matky Boží v Paříži", author: "Hugo, V.", period: "19", genre: "próza", isCzech: false },
        { title: "Vražda v Orient expresu", author: "Christie, A.", period: "20", genre: "próza", isCzech: false },
        { title: "Svět podle Garpa", author: "Irving, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Saturnin", author: "Jirotka, Z.", period: "20", genre: "próza", isCzech: true },
        { title: "Proces", author: "Kafka, F.", period: "20", genre: "próza", isCzech: true },
        { title: "Proměna", author: "Kafka, F.", period: "20", genre: "próza", isCzech: true },
        { title: "Nové mýty", author: "Kainar, J.", period: "20", genre: "poezie", isCzech: true },
        { title: "Na cestě", author: "Kerouac, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Vyhoďme ho z kola ven", author: "Kesey, K.", period: "20", genre: "próza", isCzech: false },
        { title: "Misery", author: "King, S.", period: "20", genre: "próza", isCzech: false },
        { title: "Osvícení", author: "King, S.", period: "20", genre: "próza", isCzech: false },
        { title: "Kníška Karla Kryla", author: "Kryl, K.", period: "20", genre: "poezie", isCzech: true },
        { title: "Nesnesitelná lehkost bytí", author: "Kundera, M.", period: "20", genre: "próza", isCzech: true },
        { title: "Směšné lásky", author: "Kundera, M.", period: "20", genre: "próza", isCzech: true },
        { title: "Tulák po hvězdách", author: "London, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Modlitba pro Kateřinu Horovitzovou", author: "Lustig, A.", period: "20", genre: "próza", isCzech: true },
        { title: "Máj", author: "Mácha, K. H.", period: "19", genre: "poezie", isCzech: true },
        { title: "Mastičkář", author: "Anonym", period: "18", genre: "drama", isCzech: true },
        { title: "Kulička", author: "Maupassant, G.", period: "19", genre: "próza", isCzech: false },
        { title: "Lakomec", author: "Molière", period: "18", genre: "drama", isCzech: false },
        { title: "Horalka", author: "Moravia, A.", period: "20", genre: "próza", isCzech: false },
        { title: "Maryša", author: "Mrštíkové, A. a V.", period: "19", genre: "drama", isCzech: true },
        { title: "Lolita", author: "Nabokov, V. V.", period: "20", genre: "próza", isCzech: false },
        { title: "Balady a romance", author: "Neruda, J.", period: "19", genre: "poezie", isCzech: true },
        { title: "Povídky malostranské", author: "Neruda, J.", period: "19", genre: "próza", isCzech: true },
        { title: "Manon Lescaut", author: "Nezval, V.", period: "20", genre: "poezie", isCzech: true },
        { title: "Nikola Šuhaj loupežník", author: "Olbracht, I.", period: "20", genre: "próza", isCzech: true },
        { title: "1984", author: "Orwell, G.", period: "20", genre: "próza", isCzech: false },
        { title: "Farma zvířat", author: "Orwell, G.", period: "20", genre: "próza", isCzech: false },
        { title: "Mladý muž a bílá velryba", author: "Páral, V.", period: "20", genre: "próza", isCzech: true },
        { title: "Smrt krásných srnců", author: "Pavel, O.", period: "20", genre: "próza", isCzech: true },
        { title: "Podkoní a žák", author: "Anonym", period: "18", genre: "poezie", isCzech: true },
        { title: "Jáma a kyvadlo", author: "Poe, E. A.", period: "19", genre: "próza", isCzech: false },
        { title: "Bylo nás pět", author: "Poláček, K.", period: "20", genre: "próza", isCzech: true },
        { title: "Piková dáma", author: "Puškin, A. S.", period: "19", genre: "próza", isCzech: false },
        { title: "Kalibův zločin", author: "Rais, K. V.", period: "19", genre: "próza", isCzech: true },
        { title: "Na západní frontě klid", author: "Remarque, E. M.", period: "20", genre: "próza", isCzech: false },
        { title: "Petr a Lucie", author: "Rolland, R.", period: "20", genre: "próza", isCzech: false },
        { title: "Kdo chytá v žitě", author: "Salinger, J. D.", period: "20", genre: "próza", isCzech: false },
        { title: "Zaklínač I.: Poslední přání", author: "Sapkowski, A.", period: "20", genre: "próza", isCzech: false },
        { title: "Na vlnách TSF", author: "Seifert, J.", period: "20", genre: "poezie", isCzech: true },
        { title: "Hamlet", author: "Shakespeare, W.", period: "18", genre: "drama", isCzech: false },
        { title: "Romeo a Julie", author: "Shakespeare, W.", period: "18", genre: "drama", isCzech: false },
        { title: "Othello", author: "Shakespeare, W.", period: "18", genre: "drama", isCzech: false },
        { title: "Zkrocení zlé ženy", author: "Shakespeare, W.", period: "18", genre: "drama", isCzech: false },
        { title: "Pygmalion", author: "Shaw, G. B.", period: "20", genre: "drama", isCzech: false },
        { title: "Vyšetřování ztráty třídní knihy", author: "Smoljak, L., Svěrák, Z.", period: "20", genre: "drama", isCzech: true },
        { title: "Antigona", author: "Sofokles", period: "18", genre: "drama", isCzech: false },
        { title: "Jeden den Ivana Děnisoviče", author: "Solženicyn, A.", period: "20", genre: "próza", isCzech: false },
        { title: "O myších a lidech", author: "Steinbeck, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Sophiina volba", author: "Styron, W.", period: "20", genre: "próza", isCzech: false },
        { title: "Občanský průkaz", author: "Šabach, P.", period: "20", genre: "próza", isCzech: true },
        { title: "Zbabělci", author: "Škvorecký, J.", period: "20", genre: "próza", isCzech: true },
        { title: "Stříbrný vítr", author: "Šrámek, F.", period: "20", genre: "próza", isCzech: true },
        { title: "Společenstvo prstenu", author: "Tolkien, J. R. R.", period: "20", genre: "próza", isCzech: false },
        { title: "Strakonický dudák", author: "Tyl, J. K.", period: "19", genre: "drama", isCzech: true },
        { title: "Rozmarné léto", author: "Vančura, V.", period: "20", genre: "próza", isCzech: true },
        { title: "Báječná léta pod psa", author: "Viewegh, M.", period: "20", genre: "próza", isCzech: true },
        { title: "Malý testament", author: "Villon, F.", period: "18", genre: "poezie", isCzech: false },
        { title: "Balada z hadrů", author: "Voskovec, J., Werich, J.", period: "20", genre: "drama", isCzech: true },
        { title: "Noc na Karlštejně", author: "Vrchlický, J.", period: "19", genre: "drama", isCzech: true },
        { title: "Den trifidů", author: "Wyndham, J.", period: "20", genre: "próza", isCzech: false },
        { title: "Okurková sezóna", author: "Žáček, J.", period: "20", genre: "poezie", isCzech: true }
    ];

        let selectedBooks = [];
        let availableBooks = [...books];

        function createBookElement(book, isSelected = false) {
            const div = document.createElement('div');
            div.className = 'book-item';
            
            const mainContent = document.createElement('div');
            mainContent.innerHTML = `
                <div>${book.title}</div>
                <div class="book-meta">
                    ${book.author}
                    <span class="genre-badge genre-${book.genre}">${book.genre}</span>
                </div>
            `;
            
            div.appendChild(mainContent);
            
            if (isSelected) {
                div.onclick = () => removeBook(book);
            } else {
                div.onclick = () => selectBook(book);
            }
            
            return div;
        }

        function updateBookLists() {
            const availableContainer = document.getElementById('availableBooks');
            const selectedContainer = document.getElementById('selectedBooks');
            const countElement = document.getElementById('selectedCount');
            
            availableContainer.innerHTML = '';
            selectedContainer.innerHTML = '';
            
            availableBooks.forEach(book => {
                const div = createBookElement(book, false);
                availableContainer.appendChild(div);
            });
            
            selectedBooks.forEach(book => {
                const div = createBookElement(book, true);
                selectedContainer.appendChild(div);
            });
            
            countElement.textContent = selectedBooks.length;
            validateSelection();
        }

        function selectBook(book) {
            if (selectedBooks.length >= 20) {
                alert('Již máte vybráno maximum 20 knih!');
                return;
            }
            
            const authorBooks = selectedBooks.filter(b => b.author === book.author);
            if (authorBooks.length >= 2) {
                alert('Od jednoho autora můžete vybrat maximálně 2 díla!');
                return;
            }
            
            selectedBooks.push(book);
            availableBooks = availableBooks.filter(b => b.title !== book.title);
            updateBookLists();
        }

        function removeBook(book) {
            selectedBooks = selectedBooks.filter(b => b.title !== book.title);
            availableBooks.push(book);
            availableBooks.sort((a, b) => a.title.localeCompare(b.title));
            updateBookLists();
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            
            // Vytvoření PDF s českými znaky
            const doc = new jsPDF({
                orientation: "portrait",
                unit: "mm",
                format: "a4"
            });
            
            // Nastavení fontu s podporou českých znaků
            doc.setFont("helvetica");
            
            // Nastavení nadpisu
            doc.setFontSize(18);
            doc.text("Seznam maturitní četby", 105, 20, { align: "center" });
            
            // Získání seznamu vybraných knih
            const selectedBooksDiv = document.getElementById("selectedBooks");
            const books = Array.from(selectedBooksDiv.children).map(book => {
                const text = book.textContent;
                // Rozdělení textu na název, autora a žánr (předpokládá určitý formát)
                const parts = text.split('\n');
                console.log(parts)
                return {
                    title: parts[0].trim(),
                    author: parts[1].trim(),
                    genre: parts[2].trim()
                };
            });
            
            // Přidání knih do PDF
            doc.setFontSize(12);
            let yPosition = 35;
            
            books.forEach((book, index) => {
                // Kontrola, zda je potřeba nová stránka
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                // Přidání čísla a názvu knihy
                doc.setFont("helvetica", "bold");
                console.log(book.title)
                doc.text(`${index + 1}. ${book.title}`, 20, yPosition);
                
                // Přidání autora a žánru
                doc.setFont("helvetica", "normal");
                doc.text(`${book.author} - ${book.genre}`, 30, yPosition + 6);
                
                yPosition += 15;
            });
            
            // Přidání patičky
            const dateStr = new Date().toLocaleDateString('cs-CZ');
            doc.setFontSize(10);
            doc.text(`SPŠ a VOŠ Kladno - ${dateStr}`, 105, 285, { align: "center" });
            
            // Stažení PDF
            doc.save('seznam-cetby.pdf');
        }

        
        function validateSelection() {
            const results = [];
            const validationContainer = document.getElementById('validationResults');
            
            const totalCount = selectedBooks.length;
            const before1800 = selectedBooks.filter(b => b.period === "18").length;
            const century19 = selectedBooks.filter(b => b.period === "19").length;
            const century20World = selectedBooks.filter(b => b.period === "20" && !b.isCzech).length;
            const century20Czech = selectedBooks.filter(b => b.period === "20" && b.isCzech).length;
            const prose = selectedBooks.filter(b => b.genre === "próza").length;
            const poetry = selectedBooks.filter(b => b.genre === "poezie").length;
            const drama = selectedBooks.filter(b => b.genre === "drama").length;

            results.push({
                valid: totalCount === 20,
                message: `Celkový počet knih: ${totalCount}/20`
            });
            results.push({
                valid: before1800 >= 2,
                message: `Literatura do 18. století: ${before1800}/2`
            });
            results.push({
                valid: century19 >= 3,
                message: `Literatura 19. století: ${century19}/3`
            });
            results.push({
                valid: century20World >= 4,
                message: `Světová literatura 20. století: ${century20World}/4`
            });
            results.push({
                valid: century20Czech >= 5,
                message: `Česká literatura 20. století: ${century20Czech}/5`
            });
            results.push({
                valid: prose >= 2,
                message: `Próza: ${prose}/2`
            });
            results.push({
                valid: poetry >= 2,
                message: `Poezie: ${poetry}/2`
            });
            results.push({
                valid: drama >= 2,
                message: `Drama: ${drama}/2`
            });

            validationContainer.innerHTML = results.map(result => `
                <div class="validation-item ${result.valid ? 'valid' : 'invalid'}">
                    ${result.valid ? '✓' : '✗'} ${result.message}
                </div>
            `).join('');
        }

        document.getElementById('searchBox').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredBooks = books.filter(book => 
                !selectedBooks.includes(book) && 
                (book.title.toLowerCase().includes(searchTerm) || 
                 book.author.toLowerCase().includes(searchTerm))
            );
            availableBooks = filteredBooks;
            updateBookLists();
        });

        updateBookLists();
    </script>
</body>
</html>
